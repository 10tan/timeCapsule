{"ast":null,"code":"var _jsxFileName = \"/home/tanmay-kumar/Desktop/clone-2/timeCapsule/src/Dashboard/Timer.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport \"./CountdownTimer.css\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CountdownTimer({\n  initialTime,\n  isDarkMode\n}) {\n  _s();\n  // Accept initialTime prop\n  const [time, setTime] = useState(initialTime); // Use initialTime\n  const [isRunning, setIsRunning] = useState(true); // Start automatically\n  useEffect(() => {\n    let interval;\n    if (isRunning && time > 0) {\n      interval = setInterval(() => {\n        setTime(prevTime => prevTime - 1);\n      }, 1000);\n    } else {\n      clearInterval(interval);\n      if (isRunning && time === 0) {\n        // Timer reached zero, send email\n        const sendEmail = async () => {\n          try {\n            const token = localStorage.getItem(\"token\");\n            await axios.post(\"http://localhost:5000/api/email/send-email\", {}, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            console.log(\"Email sent successfully!\");\n          } catch (error) {\n            console.error(\"Error sending email:\", error);\n            if (error.response && error.response.data && error.response.data.error) {\n              console.error(\"Server error message:\", error.response.data.error);\n            }\n          }\n        };\n        sendEmail();\n        setIsRunning(false);\n        navigate(\"/user-photos\"); // Stop the timer\n      }\n    }\n    return () => clearInterval(interval);\n  }, [isRunning, time]);\n  const formatTime = seconds => {\n    const years = Math.floor(seconds / 31536000);\n    const months = Math.floor(seconds % 31536000 / 2592000);\n    const days = Math.floor(seconds % 2592000 / 86400);\n    const hours = Math.floor(seconds % 86400 / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const remainingSeconds = seconds % 60;\n    if (years > 0) return `${years}y ${months}m`;\n    if (months > 0) return `${months}m ${days}d`;\n    if (days > 0) return `${days}d ${hours}h`;\n    if (hours > 0) return `${hours}h ${minutes}m`;\n    return `${minutes}m ${remainingSeconds}s`;\n  };\n  const handleStart = () => {\n    const seconds = parseInt(inputTime, 10);\n    if (!isNaN(seconds) && seconds > 0) {\n      setTime(seconds);\n      setIsRunning(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: isDarkMode ? \"dark-mode\" : \"light-mode\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer\",\n      children: formatTime(time)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Enter seconds\",\n        value: inputTime,\n        onChange: e => setInputTime(e.target.value),\n        className: \"input-box\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStart,\n        className: \"button\",\n        disabled: isRunning || time > 0,\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsRunning(false),\n        className: \"button\",\n        children: \"Stop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setTime(0);\n          setIsRunning(false);\n          setInputTime(\"\");\n        },\n        className: \"button\",\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(CountdownTimer, \"VaBcKmy90XseiCKkUS+3v7foIdI=\");\n_c = CountdownTimer;\nvar _c;\n$RefreshReg$(_c, \"CountdownTimer\");","map":{"version":3,"names":["useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","CountdownTimer","initialTime","isDarkMode","_s","time","setTime","isRunning","setIsRunning","interval","setInterval","prevTime","clearInterval","sendEmail","token","localStorage","getItem","post","headers","Authorization","console","log","error","response","data","navigate","formatTime","seconds","years","Math","floor","months","days","hours","minutes","remainingSeconds","handleStart","parseInt","inputTime","isNaN","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","setInputTime","target","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/tanmay-kumar/Desktop/clone-2/timeCapsule/src/Dashboard/Timer.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"./CountdownTimer.css\";\nimport axios from \"axios\"\nimport { useNavigate } from \"react-router-dom\";\nexport default function CountdownTimer({ initialTime, isDarkMode }) { // Accept initialTime prop\n  const [time, setTime] = useState(initialTime); // Use initialTime\n  const [isRunning, setIsRunning] = useState(true); // Start automatically\n  useEffect(() => {\n    let interval;\n    if (isRunning && time > 0) {\n      interval = setInterval(() => {\n        setTime((prevTime) => prevTime - 1);\n      }, 1000);\n    } else {\n      clearInterval(interval);\n      if (isRunning && time === 0) {\n        // Timer reached zero, send email\n        const sendEmail = async () => {\n          try {\n            const token = localStorage.getItem(\"token\");\n            await axios.post(\n              \"http://localhost:5000/api/email/send-email\",\n              {},\n              {\n                headers: {\n                  Authorization: `Bearer ${token}`,\n                },\n              }\n            );\n            console.log(\"Email sent successfully!\");\n          } catch (error) {\n            console.error(\"Error sending email:\", error);\n            if(error.response && error.response.data && error.response.data.error){\n                console.error(\"Server error message:\", error.response.data.error);\n            }\n          }\n        };\n        sendEmail();\n        setIsRunning(false);\n        navigate(\"/user-photos\"); // Stop the timer\n      }\n    }\n    return () => clearInterval(interval);\n  }, [isRunning, time]);\n\n\n  const formatTime = (seconds) => {\n    const years = Math.floor(seconds / 31536000);\n    const months = Math.floor((seconds % 31536000) / 2592000);\n    const days = Math.floor((seconds % 2592000) / 86400);\n    const hours = Math.floor((seconds % 86400) / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const remainingSeconds = seconds % 60;\n\n    if (years > 0) return `${years}y ${months}m`;\n    if (months > 0) return `${months}m ${days}d`;\n    if (days > 0) return `${days}d ${hours}h`;\n    if (hours > 0) return `${hours}h ${minutes}m`;\n    return `${minutes}m ${remainingSeconds}s`;\n  };\n\n  const handleStart = () => {\n    const seconds = parseInt(inputTime, 10);\n    if (!isNaN(seconds) && seconds > 0) {\n      setTime(seconds);\n      setIsRunning(true);\n    }\n  };\n\n  return (\n    <div className={isDarkMode ? \"dark-mode\" : \"light-mode\"}>\n      <div className=\"timer\">{formatTime(time)}</div>\n      <div className=\"input-container\">\n        <input\n          type=\"number\"\n          placeholder=\"Enter seconds\"\n          value={inputTime}\n          onChange={(e) => setInputTime(e.target.value)}\n          className=\"input-box\"\n        />\n      </div>\n      <div className=\"button-container\">\n        <button onClick={handleStart} className=\"button\" disabled={isRunning || time > 0}>\n          Start\n        </button>\n        <button onClick={() => setIsRunning(false)} className=\"button\">\n          Stop\n        </button>\n        <button\n          onClick={() => {\n            setTime(0);\n            setIsRunning(false);\n            setInputTime(\"\");\n          }}\n          className=\"button\"\n        >\n          Reset\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}