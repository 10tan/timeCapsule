{"ast":null,"code":"var _jsxFileName = \"/home/tanmay-kumar/Desktop/clone-2/timeCapsule/src/Dashboard/Timer.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport \"./CountdownTimer.css\";\nimport axios from \"axios\";\nimport { useNavigate } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function CountdownTimer({\n  isDarkMode\n}) {\n  _s();\n  const [time, setTime] = useState(0);\n  const [isRunning, setIsRunning] = useState(false);\n  const [inputTime, setInputTime] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    let interval;\n    if (isRunning && time > 0) {\n      interval = setInterval(() => {\n        setTime(prevTime => prevTime - 1);\n      }, 1000);\n    } else {\n      clearInterval(interval);\n      if (isRunning && time === 0) {\n        // Timer reached zero, send email\n        const sendEmail = async () => {\n          try {\n            const token = localStorage.getItem(\"token\");\n            await axios.post(\"http://localhost:5000/api/email/send-email\", {}, {\n              headers: {\n                Authorization: `Bearer ${token}`\n              }\n            });\n            console.log(\"Email sent successfully!\");\n          } catch (error) {\n            console.error(\"Error sending email:\", error);\n            if (error.response && error.response.data && error.response.data.error) {\n              console.error(\"Server error message:\", error.response.data.error);\n            }\n          }\n        };\n        sendEmail();\n        setIsRunning(false);\n        navigate(\"/user-photos\"); // Stop the timer\n      }\n    }\n    return () => clearInterval(interval);\n  }, [isRunning, time]);\n  const formatTime = seconds => {\n    const years = Math.floor(seconds / 31536000);\n    const months = Math.floor(seconds % 31536000 / 2592000);\n    const days = Math.floor(seconds % 2592000 / 86400);\n    const hours = Math.floor(seconds % 86400 / 3600);\n    const minutes = Math.floor(seconds % 3600 / 60);\n    const remainingSeconds = seconds % 60;\n    if (years > 0) return `${years}y ${months}m`;\n    if (months > 0) return `${months}m ${days}d`;\n    if (days > 0) return `${days}d ${hours}h`;\n    if (hours > 0) return `${hours}h ${minutes}m`;\n    return `${minutes}m ${remainingSeconds}s`;\n  };\n  const handleStart = () => {\n    const seconds = parseInt(inputTime, 10);\n    if (!isNaN(seconds) && seconds > 0) {\n      setTime(seconds);\n      setIsRunning(true);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: isDarkMode ? \"dark-mode\" : \"light-mode\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"timer\",\n      children: formatTime(time)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        placeholder: \"Enter seconds\",\n        value: inputTime,\n        onChange: e => setInputTime(e.target.value),\n        className: \"input-box\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStart,\n        className: \"button\",\n        disabled: isRunning || time > 0,\n        children: \"Start\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsRunning(false),\n        className: \"button\",\n        children: \"Stop\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setTime(0);\n          setIsRunning(false);\n          setInputTime(\"\");\n        },\n        className: \"button\",\n        children: \"Reset\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(CountdownTimer, \"0X2h5RiKS84R+exJ1G36FrMM1M8=\", false, function () {\n  return [useNavigate];\n});\n_c = CountdownTimer;\nvar _c;\n$RefreshReg$(_c, \"CountdownTimer\");","map":{"version":3,"names":["useState","useEffect","axios","useNavigate","jsxDEV","_jsxDEV","CountdownTimer","isDarkMode","_s","time","setTime","isRunning","setIsRunning","inputTime","setInputTime","navigate","interval","setInterval","prevTime","clearInterval","sendEmail","token","localStorage","getItem","post","headers","Authorization","console","log","error","response","data","formatTime","seconds","years","Math","floor","months","days","hours","minutes","remainingSeconds","handleStart","parseInt","isNaN","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","onClick","disabled","_c","$RefreshReg$"],"sources":["/home/tanmay-kumar/Desktop/clone-2/timeCapsule/src/Dashboard/Timer.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"./CountdownTimer.css\";\nimport axios from \"axios\"\nimport { useNavigate } from \"react-router-dom\";\nexport default function CountdownTimer({ isDarkMode }) {\n  const [time, setTime] = useState(0);\n  const [isRunning, setIsRunning] = useState(false);\n  const [inputTime, setInputTime] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    let interval;\n    if (isRunning && time > 0) {\n      interval = setInterval(() => {\n        setTime((prevTime) => prevTime - 1);\n      }, 1000);\n    } else {\n      clearInterval(interval);\n      if (isRunning && time === 0) {\n        // Timer reached zero, send email\n        const sendEmail = async () => {\n          try {\n            const token = localStorage.getItem(\"token\");\n            await axios.post(\n              \"http://localhost:5000/api/email/send-email\",\n              {},\n              {\n                headers: {\n                  Authorization: `Bearer ${token}`,\n                },\n              }\n            );\n            console.log(\"Email sent successfully!\");\n          } catch (error) {\n            console.error(\"Error sending email:\", error);\n            if(error.response && error.response.data && error.response.data.error){\n                console.error(\"Server error message:\", error.response.data.error);\n            }\n          }\n        };\n        sendEmail();\n        setIsRunning(false);\n        navigate(\"/user-photos\"); // Stop the timer\n      }\n    }\n    return () => clearInterval(interval);\n  }, [isRunning, time]);\n\n\n  const formatTime = (seconds) => {\n    const years = Math.floor(seconds / 31536000);\n    const months = Math.floor((seconds % 31536000) / 2592000);\n    const days = Math.floor((seconds % 2592000) / 86400);\n    const hours = Math.floor((seconds % 86400) / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const remainingSeconds = seconds % 60;\n\n    if (years > 0) return `${years}y ${months}m`;\n    if (months > 0) return `${months}m ${days}d`;\n    if (days > 0) return `${days}d ${hours}h`;\n    if (hours > 0) return `${hours}h ${minutes}m`;\n    return `${minutes}m ${remainingSeconds}s`;\n  };\n\n  const handleStart = () => {\n    const seconds = parseInt(inputTime, 10);\n    if (!isNaN(seconds) && seconds > 0) {\n      setTime(seconds);\n      setIsRunning(true);\n    }\n  };\n\n  return (\n    <div className={isDarkMode ? \"dark-mode\" : \"light-mode\"}>\n      <div className=\"timer\">{formatTime(time)}</div>\n      <div className=\"input-container\">\n        <input\n          type=\"number\"\n          placeholder=\"Enter seconds\"\n          value={inputTime}\n          onChange={(e) => setInputTime(e.target.value)}\n          className=\"input-box\"\n        />\n      </div>\n      <div className=\"button-container\">\n        <button onClick={handleStart} className=\"button\" disabled={isRunning || time > 0}>\n          Start\n        </button>\n        <button onClick={() => setIsRunning(false)} className=\"button\">\n          Stop\n        </button>\n        <button\n          onClick={() => {\n            setTime(0);\n            setIsRunning(false);\n            setInputTime(\"\");\n          }}\n          className=\"button\"\n        >\n          Reset\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}